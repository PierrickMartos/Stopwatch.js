/*! Stopwatch.js 1.0.0 | (c) 2013 Andrew Duthie <andrew@andrewduthie.com> | MIT License */
(function(){var a;a=function(){function a(){}var b;return a.prototype.tickTimeouts={},a.prototype.started=!1,a.prototype.running=!1,b=0,a.prototype.start=function(){return this.startTime=(new Date).valueOf(),this.running=!0,this.started?this._updateTickTimeouts():(this.started=!0,this.previousElapsed=0)},a.prototype.pause=function(){var a,b,c;if(!this.running||!this.started)throw new Error("Timer must be running to pause or stop");c=this.tickTimeouts;for(b in c)a=c[b],clearTimeout(b);return this.running=!1,this.previousElapsed=this.elapsed()},a.prototype.stop=function(){return this.pause(),this.tickTimeouts={},this.started=!1},a.prototype.elapsed=function(){return(new Date).valueOf()-this.startTime+this.previousElapsed},a.prototype.onTick=function(a,b,c){var d,e,f=this;if(null==b&&(b=1e3),null==c&&(c=!1),"function"!=typeof a)throw new TypeError("Must provide a valid callback function");if(!this.running||!this.started)throw Error("Timer must be running to add tick callback");return c||0===this.elapsed()?this._startTicking(a,b,!0):(d=b-this.elapsed()%b,e=function(){return f._startTicking(a,b,c)},setTimeout(e,d))},a.prototype._startTicking=function(a,b,c,d){var e;return null==b&&(b=1e3),null==c&&(c=!1),e=setTimeout(this._adjustingTick(a,b,c,d),b),this.tickTimeouts[e]={callback:a,immediate:c,resolution:b,startTime:(new Date).valueOf()}},a.prototype._adjustingTick=function(a,b,c,d){var e,f,g=this;return null==b&&(b=1e3),null==c&&(c=!1),f=(new Date).valueOf(),e=d||b,function(){var b,d,f;return a(g),g.running?(d=g.elapsed(),f=g._roundToNearest(d,e),b=f-d,g._startTicking(a,e+b,c,e)):void 0}},a.prototype._updateTickTimeouts=function(){var a,b,c,d,e,f,g,h,i=this;f=[],g=this.tickTimeouts;for(e in g)d=g[e],a=(new Date).valueOf()-d.startTime,b=Math.abs(d.resolution-a%resolution),c=function(){return i._startTicking(d.callback,d.resolution,d.startImmediate)},setTimeout(c,b);h=[];for(e in f)h.push(delete this.tickTimeouts[e]);return h},a.prototype._roundToNearest=function(a,b){var c;return c=b/2,a+c-(a+c)%b},a}(),this.Stopwatch=a,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=a),"function"==typeof define&&null!=define.amd&&define("Stopwatch",function(){return a})}).call(this);