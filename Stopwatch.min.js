/*! Stopwatch.js 1.0.0 | (c) 2013 Andrew Duthie <andrew@andrewduthie.com> | MIT License */
(function(){var a;a=function(){function a(){}var b;return a.prototype.tickIntervals={},a.prototype.started=!1,a.prototype.running=!1,b=0,a.prototype.start=function(){return this.start=(new Date).valueOf(),this.running=!0,this.started?this._updateTickIntervals():(this.started=!0,this.previousElapsed=0)},a.prototype.pause=function(){var a,b,c,d;if(!this.running||!this.started)throw new Error("Timer must be running to pause or stop");for(d=this.tickIntervals,b=0,c=d.length;c>b;b++)a=d[b],clearInterval(a);return this.running=!1,this.previousElapsed=this.elapsed()},a.prototype.stop=function(){return this.pause(),this.tickIntervals={},this.started=!1},a.prototype.elapsed=function(){return(new Date).valueOf()-this.start+this.previousElapsed},a.prototype.onTick=function(a,b,c){var d,e,f=this;if(null==b&&(b=1e3),null==c&&(c=!1),"function"!=typeof a)throw new TypeError("Must provide a valid callback function");if(!this.running||!this.started)throw Error("Timer must be running to add tick callback");return c?e():(d=b-this.elapsed()%b,e=function(){return f._startTicking(a,b,c)},setTimeout(e,d))},a.prototype._startTicking=function(a,b,c){return null==b&&(b=1e3),null==c&&(c=!1),this.tickIntervals[setInterval(a,b)]={callback:a,immediate:c,resolution:b,start:(new Date).valueOf()}},a.prototype._updateTickIntervals=function(){var a,b,c,d,e,f,g,h,i=this;c=[],g=this.tickIntervals;for(b in g)f=g[b],a=(new Date).valueOf()-f.start,d=Math.abs(f.resolution-a%resolution),e=function(){return i._startTicking(f.callback,f.resolution,f.startImmediate)},setTimeout(e,d);h=[];for(b in c)h.push(delete this.tickIntervals[b]);return h},a}(),this.Stopwatch=a,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=a),"function"==typeof define&&null!=define.amd&&define("Stopwatch",function(){return a})}).call(this);